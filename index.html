<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>TJNav</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="css/normalize.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/cayman.css">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">TJNav</h1>
      <h2 class="project-tagline">TJHSST Robotics Lab</h2>
      <a href="https://github.com/yukioyama/robot-localization" class="btn">View on GitHub</a>
    </section>

    <section class="main-content">
      <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h2>
TJNav is a project by Yuki Oyama and Ethan Liu at the Thomas Jefferson High School for Science and Technology Robotics Lab.  The goal of our project is to create an indoor navigation robot that is capable of guiding a user to any room within the building at TJ.  While this project is specific to our building, given any map of any building, it should be able to navigate just as well.
      
      <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Details</h2>
      The project consists of two-stages.  Stage one consists of the robot's localization ability.  To address the problem of localization, we utilized LIDAR sensor data for error correction and IMU & VESC Motor Controller Odometry data.  We feed this data into an Adaptive Monte Carlo Algorithm in order to create a probability density function to determine the most likely postition of the robot at each time frame.  Stage two consists of the robot's navigation ability.  To accomplish navigation throughout the TJHSST building, we implement the A-star Algorithm using distance heuristics to determine the shortest path a robot must traverseâ€”the rooms represent nodes of the graph.
       <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code</h2>
      
      Move_base.launch: updated 5/12
      <pre><code>   
      <launch>
  <!-- map server -->
  <arg name="map" default="$(find solace)/maps/buki.yaml" />
  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map)" />

  <!-- amcl -->
  <arg name="scan_topic"    default="scan" />
  <node pkg="amcl" type="amcl" name="amcl" output="screen">
    <param name="odom_model_type"	value="diff" />
    <param name="odom_alpha5"		value="0.1" />
    <param name="gui_publish_rate"	value="4.0" />
    <param name="laser_max_beams"	value="60" />
    <param name="laser_max_range"	value="12.0" />
    <param name="min_particles"		value="500" />
    <param name="max_particles"		value="2000" />
    <param name="kld_err"		value="0.01" />
    <param name="kld_z"			value="0.99" />
    <param name="odom_alpha1"		value="0.3" />
    <param name="odom_alpha2"		value="0.3" />
    <param name="odom_alpha3"		value="0.3" />
    <param name="odom_alpha4"		value="0.3" />
    <param name="laser_z_hit"		value="0.5" />
    <param name="laser_z_short"             value="0.05" />
    <param name="laser_z_max"               value="0.05" />
    <param name="laser_z_rand"              value="0.5" />
    <param name="laser_sigma_hit"           value="0.2" />
    <param name="laser_lambda_short"        value="0.1" />
    <param name="laser_model_type"          value="likelihood_field" />
    <param name="laser_likelihood_max_dist" value="2.0" />
    <param name="update_min_d"              value="0.15" />
    <param name="update_min_a"              value="0.2" />
    <param name="odom_frame_id"             value="gmapping_map" />
    <param name="base_frame_id"             value="base_link" />
    <param name="resample_interval"         value="1" />
    <param name="transform_tolerance"       value="0.5" />
    <param name="recovery_alpha_slow"       value="0.001" />
    <param name="recovery_alpha_fast"       value="0.1" />
    <remap from="scan"                      to="$(arg scan_topic)" />
    <remap from="map"                       to="navigation_map" />
  </node>

  <!-- navigation stack -->
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find solace)/config/racecar-v2/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find solace)/config/racecar-v2/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find solace)/config/racecar-v2/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find solace)/config/racecar-v2/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find solace)/config/racecar-v2/base_local_planner_params.yaml" command="load" />
    <rosparam file="$(find solace)/config/racecar-v2/base_global_planner_params.yaml" command="load" />
  </node>

  <!-- twist-to-vesc node -->
  <node name="navigation_twist_to_vesc" type="navigation_twist_to_vesc.py" pkg="solace" output="screen" />
</launch>

</code></pre>
      
       Local_costmap_parameters.txt: Updated 5/12
      <pre><code>  
      local_costmap:
  global_frame: odom
  robot_base_frame: base_link
  update_frequency: 2.0
  publish_frequency: 2.0
  static_map: false
  rolling_window: true
  width: 6.0
  height: 6.0
  resolution: 0.01

controller_frequency: 2.0

</code></pre>
      
       Global_costmap_parameters.txt: Updated 5/12
      <pre><code>  
     global_costmap:
  global_frame: /map
  robot_base_frame: base_link
  update_frequency: 2.0
  static_map: true


</code></pre>
       Common_costmap_parameters.txt: Updated 5/12
      <pre><code>    
   obstacle_range: 10.0
raytrace_range: 12.0
footprint: [[-0.22, 0.26], [0.22, 0.26], [0.22, -0.26], [-0.22, -0.26]]
inflation_radius: 0.5

observation_sources: laser_scan_sensor
laser_scan_sensor: {sensor_frame: laser, data_type: LaserScan, topic: scan, marking: true, clearing: true}

</code></pre>
             <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Components</h2>
             <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logs</h2>
      11/1:Finished soldering battery connector circuit.  Project order forms complete for XT60 connectors/Acrylic for chassis. <br />      
     
      11/14:Finished creating computer aided design for new electronics board panel (see photo1 galery)<br />
     
      11/30:XT60 Order Confirmation from Amazon<br />
      12//3: Robot moved upon connection w/ battery connector with 2 3000mAh Batteries in series <br />
      12/13: Tested Jetson by booting via direct power source (not in robot circuit)<br />
      2/10: Develop code for pathfinding (python script to be run in launch file)<br />
      2/14: Resoldered battery connector using XT60 Connectors<br />
      <img src="connector.png" style="max-width:100%;">
      4/14: Created Map of School for area near Robotics Lab<br />
      <img src="binarymap.png" style="max-width:100%;">
      4/16: Created yml file for our specific map to tell robot dimensions of pixel/meter ratio<br />
      <h2>
       
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gallery</h2>
                   <img src="Platformcad.png" style="max-width:100%;">
                   Photo 1. Panel on which VESC, IMU, and LIDAR will be mounted
                   <h2>
      <a id="user-content-header-2" class="anchor" href="#header-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discussion</h2>

      <div id="disqus_thread"></div>
<script>
var disqus_config = function () {
this.page.url = PAGE_URL; 
this.page.identifier = PAGE_IDENTIFIER;
};
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://https-yukioyama-github-io-robot-localization.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/yukioyama/robot-localization">TJNav</a> is maintained by <a href="https://github.com/yukioyama">yukioyama</a>.</span>
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>

    </section>

  </body>
</html>
